@{
    ViewBag.Title = "Curve";
}
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="stylesheet" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.dialog.css")" rel="stylesheet" />
<script src="@Url.Content("~/ViewsScripts/globalCurve.js")"></script>
<script src="@Url.Content("~/ViewsScripts/DataMonitor/HLBDCurve.js")?=3"></script>
<script src="@Url.Content("~/ViewsScripts/DataMonitor/SNBXCurve.js")?=3"></script>
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.js")"></script>
<script src="@Url.Content("~/Scripts/jcanvas.min.js")?v=8"></script>
<script src="@Url.Content("~/Scripts/xml2json.js")"></script>

<style type="text/css">
    ul {
        list-style-type: none;
    }

    #contextmenu {
        position: absolute;
        top: -9999px;
        left: -9999px;
    }

        #contextmenu ul {
            float: left;
            border: 1px solid #979797;
            background: #f1f1f1 url(/img/20120327wwwzzjsnet_1.png) 24px 0 repeat-y;
            padding: 2px;
            box-shadow: 2px 2px 2px rgba(0,0,0,.6);
        }

            #contextmenu ul li {
                float: left;
                clear: both;
                height: 24px;
                cursor: pointer;
                line-height: 24px;
                white-space: nowrap;
                padding: 0 30px;
            }

                #contextmenu ul li.sub {
                    background-repeat: no-repeat;
                    background-position: right 9px;
                    background-image: url(/img/20120327wwwzzjsnet_2.png);
                }

                #contextmenu ul li.active {
                    background-color: #f1f3f6;
                    border-radius: 3px;
                    border: 1px solid #aecff7;
                    height: 22px;
                    line-height: 22px;
                    background-position: right -8px;
                    padding: 0 29px;
                }

            #contextmenu ul ul {
                display: none;
                position: absolute;
            }


</style>
<script type="text/javascript">
    $(function () {
        
        // new CurveContext().buildRect();
        var s1 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 189</uidSource><curveNames><string>BPOS</string><string>DMEA</string><string>MDOA</string>></curveNames><lastIndex>2035.58</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';

        var s2 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 2</uidSource><curveNames><string>DMEA</string><string>TQA</string>></curveNames><lastIndex>2035.50</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s3 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 13</uidSource><curveNames><string>G_C1</string><string>G_C2</string><string>G_C3</string><string>G_IC4</string><string>G_IC5</string><string>G_NC4</string><string>G_NC5</string><string>md</string>></curveNames><lastIndex>2032.26</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s4 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 189</uidSource><curveNames><string>BPOS</string><string>DMEA</string><string>MDOA</string>></curveNames><lastIndex>2035.58</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s5 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 2</uidSource><curveNames><string>DMEA</string><string>TQA</string>></curveNames><lastIndex>2035.50</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s6 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 13</uidSource><curveNames><string>G_C1</string><string>G_C2</string><string>G_C3</string><string>G_IC4</string><string>G_IC5</string><string>G_NC4</string><string>G_NC5</string><string>md</string>></curveNames><lastIndex>2032.26</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';

        var s7 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 189</uidSource><curveNames><string>BPOS</string><string>DMEA</string><string>MDOA</string>></curveNames><lastIndex>2035.58</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s8 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 13</uidSource><curveNames><string>G_C1</string><string>G_C2</string><string>G_C3</string><string>G_IC4</string><string>G_IC5</string><string>G_NC4</string><string>G_NC5</string><string>md</string>></curveNames><lastIndex>2032.26</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s9 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 2</uidSource><curveNames><string>DMEA</string><string>TQA</string>></curveNames><lastIndex>2035.50</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s10 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 189</uidSource><curveNames><string>BPOS</string><string>DMEA</string><string>MDOA</string>></curveNames><lastIndex>2035.58</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';

        var s11 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 2</uidSource><curveNames><string>DMEA</string><string>TQA</string>></curveNames><lastIndex>2035.50</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s12 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 13</uidSource><curveNames><string>G_C1</string><string>G_C2</string><string>G_C3</string><string>G_IC4</string><string>G_IC5</string><string>G_NC4</string><string>G_NC5</string><string>md</string>></curveNames><lastIndex>2032.26</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s13 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 2</uidSource><curveNames><string>DMEA</string><string>TQA</string>></curveNames><lastIndex>2035.50</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s14 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 13</uidSource><curveNames><string>G_C1</string><string>G_C2</string><string>G_C3</string><string>G_IC4</string><string>G_IC5</string><string>G_NC4</string><string>G_NC5</string><string>md</string>></curveNames><lastIndex>2032.26</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s15 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 2</uidSource><curveNames><string>DMEA</string><string>TQA</string>></curveNames><lastIndex>1936</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s16 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 13</uidSource><curveNames><string>G_C1</string><string>G_C2</string><string>G_C3</string><string>G_IC4</string><string>G_IC5</string><string>G_NC4</string><string>G_NC5</string><string>md</string>></curveNames><lastIndex>1936</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var s17 = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"><soap:Header/><soap:Body><GetLogData xmlns="http://www.oildigital.com/"><uidWell>Dohar-2</uidWell><uidWellbore>Dohar-2</uidWellbore><uidSource>%Rec 189</uidSource><curveNames><string>BPOS</string><string>DMEA</string><string>MDOA</string>></curveNames><lastIndex>1936</lastIndex><maxCount>-1</maxCount><startIndex></startIndex><endIndex></endIndex></GetLogData></soap:Body></soap:Envelope>';
        var soapMessage = new Array();
        soapMessage.push(s1);
        soapMessage.push(s2);
        soapMessage.push(s3);
        soapMessage.push(s4);
        soapMessage.push(s5);
        soapMessage.push(s6);
        soapMessage.push(s7);

        soapMessage.push(s8);
        soapMessage.push(s9);
        soapMessage.push(s10);

        soapMessage.push(s11);
        soapMessage.push(s12);
        soapMessage.push(s13);
        soapMessage.push(s14);
        soapMessage.push(s15);
        soapMessage.push(s16);
        soapMessage.push(s17);

        for (var i = 0; i < soapMessage.length; i++) {
            $.ajax({
                url: 'http://demo.oildigital.com:8080/gds/witsmlservice.asmx',
                type: 'POST',
                dataType: 'xml',
                data: soapMessage[i],

                complete: function (xmlHttpRequest, status) {
                    //var json = getJson(xmlHttpRequest.responseText, "GetLogDataResponse");
                    alert("commplete:" + xmlHttpRequest.responseText);
                    // Module.soap_callback(callId, JSON.stringify(json), xmlHttpRequest.status);
                },
                contentType: 'text/xml; charset="utf-8"; action="http://www.oildigital.com/GetLogData"'

            });
        }
       

    });
    function getJson(dom, tag) {
        alert(dom);
        var node = $(dom).find(tag).get(0);
        console.log(node);
        var x2js = new X2JS();
        var json = x2js.xml2json(node);
        return json;
    }
    function save()
    {

    }
    function resetTemplate() {
    //    var c = document.getElementById("can_header");
    //    var cxt = c.getContext("2d");
    //    cxt.clearRect(0, 0, c.width, c.height);
    //var d = document.getElementById("can_datas");
    //var dxt = d.getContext("2d");
    //dxt.clearRect(0, 0, d.width, d.height);

        $('#can_header').clearCanvas();
        $('#can_datas').clearCanvas();
        new CurveContext().buildRect();

    }
    function changeDepth() {

        //if(window.location!=window.parent.location){// 页面在iframe中
        //    window.parent.jQuery.noConflict();
        //}else{// 页面单独打开
        //    jQuery.noConflict();
        //}

       //$doc("#depth").css("display", "block");
       $("#depth").dialog(
            {
                title: '调整深度参数',
                height: 330,
                width: 550,
                modal: true,
                buttons: [{
                    text: "确定",
                    click: function () {
                        alert(111);
                    }
                }, {
                    text: "取消",
                    click: function () {
                        $(this).dialog("close");
                    }
                }


                ]
            });
    }
    </script>
@*<script type="text/javascript" src="@Url.Content("~/Scripts/DataMonitor_Canvas.js")?v=8"></script>*@

<div style="width:100%;overflow:auto;height:30px;">
    <label>选择模版：</label>
    <select id="companyName" onchange="resetTemplate()">
        <option value="哈里波顿">哈里波顿</option>
        <option value="斯伦贝谢">斯伦贝谢</option>
    </select>
    <input type="button" id="save" onclick="changeDepth();" value="深度" />
    <label>比例尺：</label>
    <select id="rate" onchange="resetTemplate()">
        <option value="50">1:50</option>
        <option value="200">1:200</option>
        <option value="500">1:500</option>
        <option value="1000">1:1000</option>
    </select>
    <input type="button" id="save" onclick="save();" value="保存" />
</div>
<div  style="width:100%;overflow:auto;height:400px;">

<canvas id="can_header">

    </canvas>
    </div>
<div  style="width:100%;overflow:auto;height:700px;">
<canvas id="can_datas">

    </canvas>
    </div>
<div id="contextmenu">
    <ul>

        <li>
            道操作
            <ul>
               <li> <a href="#" onclick="alert(添加道);">添加道</a></li>
                <li>删除本道</li>
            </ul>
        </li>
        <li>
            二号菜单
            <ul>
                <li>改变网页背景颜色</li>
                <li>函数传参</li>
            </ul>
        </li>
    </ul>
</div>
<div id="depth" style="display:none">
    <label>设计深度</label>
</div>


